## 영화 예매 시스템

온라인 영화 예매 시스템 예제이고, 요구사항을 정리해보자

### 요구사항 살펴보기

- 영화 : 영화에 대한 기본정보(제목, 상영시간, 가격)를 표현한다.
- 상영 : 실제로 관객들이 영화를 관람하는 사건(상영 일자, 시간, 순번 등)을 표현한다.
- 하나의 영화는 하루 중 다양한 시간대에 걸쳐 한 번 이상 상영될 수 있다.
- 특정 조건을 만족하는 예매자는 요금을 할인 받을 수 있다.(* 영화별로 하나의 할인 정책만 할당 가능)
    - 할인 조건 : 가격의 할인 여부 결정
        - 순서 조건과 기간 조건으로 나뉨
    - 할인 정책 : 할인 요금을 결정
        - 금액 할인 정책과 비율 할인 정책으로 나뉨

## 객체지향 프로그래밍을 향해

### 협력, 객체, 클래스

객체지향은 말 그대로 객체를 지향하는 것이다. 진정한 객체지향 패러다임으로의 전환은 클래스가 아닌 객체에 초점을 맞출 때에만 얻을 수 있다.

- 어떤 클래스가 필요한지를 고민하기 전에 `어떤 객체들이 필요한지` 고민하라.
- 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 `협력하는 공동체의 일원`으로 봐야 한다.

### 도메인의 구조를 따르는 프로그램 구조

> **도메인이란 ?**  
> 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야

객체지향 패러다임은 요구사항을 분석하는 초기 단계부터 프로그램을 구현하는 마지막 단계까지
객체라는 동일한 추상화 기법을 사용할 수 있다.

그렇기에 요구사항과 프로그램을 객체라는 동일한 관점에서 바라볼 수 있어 도메인을 구성하는 개념들이
프로그램의 객체와 클래스로 매끄럽게 연결될 수 있다.

### 클래스 구현하기

> 인스턴스 변수의 가시성은 private, 메서드의 가시성은 public

클래스를 구현하거나 다른 개발자에 의해 개발된클래스를 사용할 때 가장 중요한 것은
클래스의 경계를 구분 짓는 것이다.  
클래스는 내부와 외부로 구분되며, 훌륭한 클래스를 설계하기 위한 핵심은 어떤 부분을 외부에 공개하고
어떤 부분을 감출지를 결정하는 것이다.

#### 클래스의 내부와 외부를 구분해야 하는 이유

경계의 명확성이 객체의 자율성을 보장하기 때문이다. 더 중요한 이유로 프로그래머에게 구현의 자유를 제공하기 때문이다.

### 자율적인 객체

- 객체는 `상태(state)`와 `행동(behavior)`을 함께 가지는 복합적인 존재다.
    - 데이터와 기능을 객체 내부로 함께 묶는 것을 `캡슐화`라고 부른다.
    - 외부에서의 접근을 통제할 수 있는 `접근 제어` 메커니즘도 함께 제공한다.
    - 접근 제어를 위해 public, protected, private과 같은 `접근 수정자`를 제공한다.
- 객체는 스스로 판단하고 `행동하는 자율적인 존재`다.
    - 객체가 자율적인 존재로 우뚝 서기 위해서는 외부의 간섭을 최소화해야 한다.

캡슐화와 접근 제어는 객체를 두 부분으로 나눈다.

- 외부에서 접근 가능한 부분으로 이를 `퍼블릭 인터페이스`라고 부른다.
- 외부에서 접근 불가능하고 오직 내부에서만 접근 가능한 부분으로 이를 `구현`이라고 부른다.

### 프로그래머의 자유

프로그래머의 역할을 `클래스 작성자`와 `클라이언트 프로그래머`로 구분하는 것이 유용하다.

- 클래스 작성자 : 필요한 클래스들을 엮어서 애플리케이션을 빠르고 안정적으로 구축
- 클라이언트 프로그래머 : 클래스 작성자가 추가한 데이터 타입을 사용(숨겨 놓은 부분에 마음대로 접근할 수 없도록 방지)

객체의 외부와 내부를 구분하면 클라이언트 프로그래머가 알아야 할 지식의 양이 줄어들고 클래스
작성자가 자유롭게 구현을 변경할 수 있는 폭이 넓어진다.

### 협력하는 객체들의 공동체

영화 예매하는 기능을 구현하는 메서드를 살펴보겠습니다.

```java
public class Screening {
    public Reservation reserve(Customer customer, int audienceCount) {
        return new Resercation(customer, this, calculateFee(audienceCount), audienceCount);
    }
}
```
위 코드는 calculateFee라는 메서드 호출 후 결과를 Reservation의 생성자에 전달합니다.
